window.addEventListener("DOMContentLoaded",()=>{let editor=CodeMirror.fromTextArea(document.getElementById("editor"),{mode:"javascript",lineNumbers:!0,theme:"default"}),languageSelect=document.getElementById("language-select"),themeSelect=document.getElementById("theme-select"),runBtn=document.getElementById("run-btn"),output=document.getElementById("output"),htmlPreview=document.getElementById("html-preview"),languages={javascript:"javascript",python:"python",java:"text/x-java",php:"php",html:"htmlmixed",markdown:"markdown"};for(let[e,t]of Object.entries(languages)){let o=document.createElement("option");o.value=t,o.textContent=e,languageSelect.appendChild(o)}languageSelect.addEventListener("change",e=>{let t=e.target.value;editor.setOption("mode",t)}),themeSelect.addEventListener("change",e=>{editor.setOption("theme",e.target.value)}),runBtn.addEventListener("click",()=>{let code=editor.getValue();if(output.textContent="",htmlPreview.srcdoc="",languageSelect.value==="javascript")try{let logs=[],originalConsoleLog=console.log;console.log=(...e)=>{logs.push(e.join(" ")),originalConsoleLog.apply(console,e)},eval(code),console.log=originalConsoleLog,output.textContent=logs.join(`
`)}catch(e){output.textContent="Error: "+e.message}else languageSelect.value==="htmlmixed"?htmlPreview.srcdoc=code:output.textContent="Run is only supported for JavaScript and HTML currently."})});
